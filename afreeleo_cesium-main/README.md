# AFREELEO - Cesium Mission Simulator

![Cesium](https://img.shields.io/badge/Cesium-v1.121.1-blue)
![Vite](https://img.shields.io/badge/Vite-v6.0.5-646CFF)
![License](https://img.shields.io/badge/License-Private-red)

## 📋 Description

AFREELEO is a space mission simulator developed with CesiumJS. It allows you to visualize and simulate in 3D the launch of satellites from Dakar (Senegal) via an air-launch system.

The project includes:
- ✈️ Complete simulation of a carrier flight (cargo aircraft)
- 🚀 High-altitude rocket launch
- 🛰️ Satellite orbital insertion
- 📡 Real-time tracking of existing satellites via TLE data
- 🌍 Interactive 3D visualization with Cesium

## 🎯 Key Features

- **Launch from Dakar**: Simulation of takeoff from Dakar-Léopold Sédar Senghor Airport
- **Carrier Flight**: Ascent to 12 km altitude with cargo aircraft (Airbus A380 / Boeing 747)
- **Orbital Launch**: Separation and orbital insertion at 400 km (LEO - Low Earth Orbit)
- **Real Satellites**: Visualization of existing satellites with updated TLE data
- **3D Models**: Realistic 3D representations of vehicles (aircraft, rockets, satellites)
- **Orbital Trajectories**: Calculation and display of trajectories with satellite.js

## 🛠️ Technologies Used

- **[CesiumJS](https://cesium.com/cesiumjs/)** (v1.121.1) - 3D geospatial visualization engine
- **[satellite.js](https://github.com/shashwatak/satellite-js)** (v6.0.1) - Orbital trajectory calculations
- **[Vite](https://vitejs.dev/)** (v6.0.5) - Ultra-fast build tool
- **vite-plugin-cesium** (v1.2.22) - Vite plugin for Cesium
- **[GMAT](https://gmat.gsfc.nasa.gov/)** - General Mission Analysis Tool (for trajectory generation)

## 📦 Prerequisites

Before starting, make sure you have installed:

- **Node.js** version 18.0 or higher
- **npm** version 9.0 or higher (or yarn/pnpm)

To check your versions:
```bash
node --version
npm --version
```

## 🚀 Installation

### 1. Clone the project

```bash
git clone <repo-url>
cd afreeleo-cesium
```

### 2. Install dependencies

```bash
npm install
```

This command automatically installs:
- Cesium and its dependencies
- satellite.js for orbital calculations
- Vite and the Cesium plugin
- All necessary development tools

## ▶️ Running the Project

### Development Mode

To start the development server with hot reload:

```bash
npm run dev
```

The simulator will be accessible at:
```
http://localhost:5173
```

The server typically starts on port 5173. If this port is occupied, Vite will automatically use the next available port.

### Production Mode

#### Build the Project

To create an optimized production build:

```bash
npm run build
```

Optimized files will be generated in the `dist/` folder.

#### Preview the Build

To test the production version locally:

```bash
npm run preview
```

## 📁 Project Structure

```
afreeleo-cesium/
├── index.html                      # Main HTML page
├── main.js                         # Main JavaScript code
├── config.js                       # Mission configuration file
├── package.json                    # Dependencies and scripts
├── vite.config.js                  # Vite configuration
├── airbus_a380.glb                 # Airbus A380 3D model
├── boeing_747.glb                  # Boeing 747 3D model
├── falcon_9_block_4.5.glb          # Falcon 9 3D model
├── falcon_9_second_stage.glb       # Falcon 9 second stage 3D model
├── f9_stage_1_model.glb           # First stage 3D model
├── satellite_modul.glb             # Modular satellite 3D model
├── simple_satellite.glb            # Simple satellite 3D model
├── mission_38baa6d1_satellite.txt  # Satellite mission data (from GMAT)
└── mission_38baa6d1_upperstage.txt # Upper stage data (from GMAT)
```

## 🔗 Integration with afro-launch-cost_calculator

This simulator uses trajectory data generated by the **[afro-launch-cost_calculator](https://github.com/yourusername/afro-launch-cost_calculator)** repository.

### Mission Trajectory Files

The trajectory files (`mission_*_satellite.txt` and `mission_*_upperstage.txt`) are generated from GMAT (General Mission Analysis Tool) simulations performed in the afro-launch-cost_calculator project.

**Important Note**: For performance reasons, the GMAT simulation is limited to **15 minutes** of flight trajectory. This allows for:
- Faster computation times
- Reduced file sizes
- Better real-time visualization performance
- Sufficient data to demonstrate the launch and early orbital phases

### Configuration File

The `config.js` file contains the paths to these mission files:

```javascript
export const MISSION_CONFIG = {
  trajectoryFiles: {
    upperstage: './mission_38baa6d1_upperstage.txt',
    satellite: './mission_38baa6d1_satellite.txt',
  },
  simulation: {
    duration: 15, // minutes
    tool: 'GMAT'
  }
};
```

### Workflow

1. **Generate trajectories** in afro-launch-cost_calculator using GMAT
2. **Export the trajectory files** (upperstage and satellite)
3. **Place the files** in the root of this project
4. **Update config.js** with the correct file paths
5. **Run the simulator** to visualize the mission

## 🎮 Usage

### Cesium Interface

Once the simulator is launched, you have several controls:

#### Camera Controls
- **Rotation**: Left click + drag
- **Zoom**: Mouse wheel or right click + drag
- **Pan**: Middle click + drag or Shift + left click + drag

#### Timeline and Animation
- Use the timeline at the bottom to control simulation time
- Play/pause buttons to start/stop animation
- Simulation speed adjustment

### Mission Parameters

Main parameters are configurable in `main.js`:

```javascript
const MISSION_CONFIG = {
  launchSite: { lon: -17.477989, lat: 14.733128 },  // Launch site (Dakar)
  carrierAltitude: 12000,                           // Carrier altitude (12 km)
  targetAltitude: 400000,                           // Target orbital altitude (400 km)
  orbitalInclination: 14.7,                         // Orbital inclination (degrees)
  carrierSpeed: 250,                                // Carrier speed (m/s)
  // Phase durations in seconds
  phaseDurations: {
    pause: 100,        // Pre-takeoff pause
    taxiing: 30,       // Taxiing
    takeoff: 60,       // Takeoff
    climb: 120,        // Climb
    cruise: 600,       // Cruise
    launch: 300,       // Launch
    orbit: 5400,       // Complete orbit (90 min)
    deorbit: 172800    // Deorbiting (48h)
  }
}
```

## 📡 Tracked Satellites

The simulator displays several real satellites in real-time, including:

- **CALSPHERE 1 & 2** - Calibration satellites
- **LCS 1** - Lincoln Calibration Sphere
- **TEMPSAT 1** - Temperature satellite
- **OPS 5712** - Operational satellites
- **LES-5** - Lincoln Experimental Satellite
- And other historical satellites

TLE data is updated to track current orbital positions.

## 🔧 Configuration

### Vite Configuration

The `vite.config.js` file configures the Cesium plugin:

```javascript
import { defineConfig } from 'vite'
import cesium from 'vite-plugin-cesium'

export default defineConfig({
  plugins: [cesium()],
})
```

### Cesium Viewer Options

The Cesium viewer is configured in `main.js` with:

```javascript
const viewer = new Cesium.Viewer("cesiumContainer", {
  shouldAnimate: true,    // Enable animation
  timeline: true,         // Show timeline
  animation: true,        // Show animation controls
});
```

## 🔬 GMAT Simulation Details

### Simulation Constraints

The trajectory data used in this simulator comes from GMAT (General Mission Analysis Tool) simulations with the following constraints:

- **Duration**: 15 minutes of simulated flight time
- **Reason**: Performance optimization for real-time visualization
- **Coverage**: Includes carrier flight, rocket launch, and initial orbital insertion
- **Data points**: Sufficient resolution for smooth visualization

### Performance Considerations

The 15-minute simulation window was chosen to:
- Minimize computational load during GMAT calculations
- Reduce trajectory file sizes for faster loading
- Enable smooth real-time playback in the browser
- Focus on the most critical mission phases (launch and insertion)

For extended orbital simulations beyond 15 minutes, the simulator uses Keplerian propagation via satellite.js.

## 🐛 Troubleshooting

### Server Won't Start
- Check that port 5173 is not already in use
- Delete `node_modules` and `package-lock.json`, then reinstall:
  ```bash
  rm -rf node_modules package-lock.json
  npm install
  ```

### 3D Model Errors
- Ensure all `.glb` files are present in the root directory
- Check the paths in `main.js`

### Slow Performance
- Close other resource-intensive applications
- Use a modern browser (Chrome, Firefox, Edge)
- Verify that your GPU is enabled for hardware acceleration

### Build Issues
- Clean Vite cache: `npm run build -- --force`
- Delete the `dist` folder before rebuilding

### Missing Mission Files
- Ensure trajectory files are generated from afro-launch-cost_calculator
- Check that file paths in `config.js` match the actual file locations
- Verify that mission files are not empty or corrupted

## 🔑 Cesium API Key (Optional)

For advanced features (high-resolution imagery, terrain), you can get a free API key from [Cesium Ion](https://cesium.com/ion/signup).

Then add in `main.js`:
```javascript
Cesium.Ion.defaultAccessToken = 'YOUR_API_KEY';
```

## 📚 Resources

- [CesiumJS Documentation](https://cesium.com/learn/cesiumjs-learn/)
- [satellite.js Documentation](https://github.com/shashwatak/satellite-js)
- [Vite Documentation](https://vitejs.dev/guide/)
- [Cesium Tutorials](https://cesium.com/learn/cesiumjs-learn/cesiumjs-quickstart/)
- [TLE Data](https://celestrak.org/)
- [GMAT Documentation](https://gmat.gsfc.nasa.gov/)
- [afro-launch-cost_calculator Repository](https://github.com/yourusername/afro-launch-cost_calculator)

## 🤝 Contributing

To contribute to the project:

1. Fork the repository
2. Create a branch for your feature (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 👥 Authors

AFREELEO Project - Space Mission Simulation

## 🙏 Acknowledgments

- CesiumJS for their incredible 3D visualization engine
- The satellite.js community for orbital calculation tools
- TLE data providers (CelesTrak, Space-Track)
- NASA GMAT team for the mission analysis tool
- The afro-launch-cost_calculator project for trajectory generation

---

**Note**: This simulator is for demonstration and educational purposes. Mission parameters may not reflect actual operational values.
